{{ define "main" }}
<section class="section" aria-labelledby="ttl">
  <div class="contain">
    <h1 id="ttl">Illustrations</h1>

    {{/* タグ収集（このセクション内だけ） */}}
    {{ $tags := slice }}
    {{ range .Pages }}
      {{ with .Params.tags }}
        {{ range . }}
          {{ $tags = $tags | append . | uniq }}
        {{ end }}
      {{ end }}
    {{ end }}

    <div class="filters" data-filter-group>
      <button class="chip active" data-filter="*">All</button>
      {{ range sort $tags }}
        <button class="chip" data-filter="{{ . | urlize }}">{{ . }}</button>
      {{ end }}
    </div>

    <div class="grid cards" id="cards">
      {{ range .Pages.ByDate.Reverse }}
        <article class="card" data-tags="{{ delimit .Params.tags " " | urlize }}">
          <a href="{{ .RelPermalink }}">
            {{ with .Params.cover }}
              <img src="{{ . }}" alt="{{ $.Title }} cover">
            {{ end }}
            <h3>{{ .Title }}</h3>
          </a>
          {{ with .Summary }}<p>{{ . }}</p>{{ end }}
        </article>
      {{ end }}
    </div>
  </div>
</section>
{{ end }}
